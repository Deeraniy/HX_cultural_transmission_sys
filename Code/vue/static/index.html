<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>湖湘文化国际传播效果分析系统</title>
		<link rel="stylesheet" type="text/css" href="css/deaderindext.css" />
        <link href="//unpkg.com/layui@2.9.21/dist/css/layui.css" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/hx.css" />
        <script src="//unpkg.com/layui@2.9.21/dist/layui.js"><script type="text/javascript"
                    src="https://cdn.jsdelivr.net/npm/echarts@4.5.0/dist/echarts.min.js"></script>
        <script src="js/axios.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
        <script src="js/httpVueLoader.js"></script>
        <script src="https://unpkg.com/vue/dist/vue.js"></script>
        <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@4.5.0/dist/echarts.min.js"></script>
		<script src="js/jquery-1.8.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery.nicescroll.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery.mcustomscrollbar.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/zoom.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/transit.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/caroufredsel.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/raphael.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/index.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){
				console.log('11111111111')
				$(window).scroll(function(){
					console.log('11111111111333333333333')
					if($(window).scrollTop()>1000){
						console.log('4444444444444444444')
						$('.sidebar').css('display','block');
					}
				});
			})

		</script>
        <style>
            /* 为页面添加顶部空间，避免头部和下方内容重叠 */

            .sidebar {
                position: relative;  /* 取消固定定位，确保正常流式布局 */
            }
        </style>
	</head>
	<body >
    <!-- 方法1：使用空div + margin -->
    <div style="height: 20px; margin: 20px 0;"></div>
		<div class="sc_cg" style="display:none;">
			<div class="c">
				<i class="close"></i>
				<h3></h3>
				<a href="javascript:;" class="sure_btn">确 定</a>
			</div>
		</div>
		<!--弹出提示框的效果-->
		<script>
			var my_alert = function(content, ico, url) {
				url = url ? url : 'javascript:;';
				ico = ((ico == 1) ? 2 : 1) || 1;
				$(".sc_cg").fadeIn(300);
				$(".sc_cg .c h3").html(content);
				$('.sure_btn').attr('href', url);
				return false;
			}
			$(document).on("click", ".sc_cg  .close,.sc_cg .sure_btn", function() {
				$(this).closest(".sc_cg").fadeOut(300);
			})
		</script>

		<!--右边导航的开始-->
		<div class="sidebar">
			<div class="">
				<a href="javascript:;" class="gotop"></a>
				<ul>
					<li class="season">
						<a href="javascript:;">
							<span class="seasonal_name">肤</span>
							<span id="season"><i>年</i> · <i>庆</i> · <i>博</i> · <i>春</i> · <i>夏</i> · <i>秋</i> · <i>冬</i> · <i>常</i></span>
						</a>
					</li>
					<li class="share bdsharebuttonbox" data-tag="share_1">
						<a style="background-image: none; height:42px; line-height: 37px;padding-left:0; margin:0; opacity: 1;" href="javascript:;">
							<span>享</span>
							<span>
                    <i class="i1">
                        <img data-cmd="tsina" src="img/share-icon1.png">
                    </i>
                    <i class="i2">
                        <img data-cmd="weixin" src="img/share-icon2.png">
                    </i>
                </span>
						</a>
					</li>
					<li>
						<a href="" target="_blank"><span>书</span><span>非遗博物馆</span></a>
					</li>
					<li>
						<a href="" target="_blank"><span>听</span><span>美食街</span></a>
					</li>
					<li>
						<a href="" target="_blank"><span>创</span><span>红色文化走廊</span></a>
					</li>
					<li>
						<a id="bdclick_btn5" href="" target="_blank"><span>景</span><span>影视文学库</span></a>
					</li>
					<li>
						<a id="bdclick_btn6" href="" target="_blank"><span>VR</span><span>风景区</span></a>
					</li>
					<li>
						<a href="login.html" target="_blank"><span>登</span><span>会员登录</span></a>
					</li>
				</ul>
				<a class="close" href="javascript:;"></a>
			</div>
		</div>
		<!--右边导航的结束-->
		<!--轮播开始-->
		<div id="container" class="home " >

			<div class="wrap">
<!--                <div class="block1 show">-->
<!--                    <div class="left" style="height: 600px;background-image: url(img/img_hx/纹理.jpg);margin-right: 30px">-->
<!--&lt;!&ndash;                        存放知识图谱&ndash;&gt;-->
<!--                        &lt;!&ndash; 为ECharts准备一个具备大小的Dom &ndash;&gt;-->
<!--                        <div class = "col-md-12">-->
<!--                            <div class="panel panel-default ">-->
<!--                                <header class="panel-heading">-->
<!--                                </header>-->
<!--                                <div class = "panel-body ">-->
<!--                                    <div id="graph" style="width: 100%;height:600px;"></div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                    </div>-->
<!--                    <div  style="height: 600px;padding-left: 100px;background-image: url(img/img_hx/纹理3.jpg);" id="knowledgeMap" >-->
<!--&lt;!&ndash;                        操作知识图谱模块&ndash;&gt;-->
<!--                        <div style="">-->
<!--                            <div style="padding-top: 20px;display: flex">-->
<!--                                <p style="margin-top: 10px;color: white;font-weight: bold">请输入查询节点：</p>-->
<!--                                <input type="text" id="nodeInput" placeholder="查询节点" class="layui-input" style="width: auto;margin-left: 30px">-->
<!--                                <button onclick="searchNode()" type="button" class="layui-btn layui-btn-primary layui-btn-radius" style="margin-left: 30px;background-image: url(img/img_hx/纹理2.jpg)">查询</button>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div style="display: flex;margin-top: 30px">-->
<!--                            <div id="nodeName" style="display: inline-block;color: white">-->
<!--                                节点名称：-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div style="display: flex;display: flex;margin-top: 30px">-->
<!--                            <div id="nodeDescription" style="margin-top: 30px; height: 300px; overflow-y: auto;color: white">-->
<!--                                节点描述：-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <button id="detailsButton" type="button" class="layui-btn layui-btn-primary layui-btn-radius"-->
<!--                                style="margin-left: 30px; background-image: url(img/img_hx/纹理2.jpg); width: 400px"-->
<!--                                onclick="viewDetails()">查看详情</button>-->

<!--                    </div>-->
<!--                </div>-->


		<!--故宫藏品的开始-->
				<div class="block2">
					<div class="box">
						<div class="">
							<div class="title">
								<h1>
           						 	 <span class="tit-span"><img src="img/public-icon1.png"></span>
           							 <span class="s1">湖湘</span>
           							 <span>美食</span>
          							 <span class="tit-span"><img src="img/public-icon2.png"></span>
       							 </h1>
							</div>

							<div class="num">
								<b>28个</b>
							</div>

							<div class="tip" style="cursor:pointer;" onClick="openAlert('.pop-type')"><span>湖湘<b></b>美食查询</span></div>


						</div>
					</div>
					<ul class="list">
						<li class="sHoverItem"><img alt="" title="" class="lazyload" src="img/img_hx/湘菜3.jpg">
							<div class="mask">
								<a href="/collection/paint/229937.html">
									<p>永州血鸭</p>

									<p>色泽红亮，味道鲜香，肉质滑嫩</p>
									<p></p>
									<p class="jj">永州血鸭是一道经典的湘菜，以鸭肉为主料，搭配独特的香料和调料，制作出浓郁的风味，深受当地居民和游客的喜爱。</p>
									<p class="pos"></p>
									<h1></h1>
								</a>
							</div>
						</li>
						<li class="sHoverItem"><img alt="" title="" class="lazyload" src="img/img_hx/湘菜1.jpg">
							<div class="mask">
								<a href="/collection/paint/230459.html">
									<p>湘西外婆菜</p>

									<p>酸辣可口，丰富的营养，家常风味。</p>
									<p></p>
									<p class="jj">外婆菜是湖南传统名菜之一，通常用腌制的蔬菜、豆蔻和辣椒等制作，味道鲜明，唤起人们对家乡的记忆和温暖的感觉。</p>
									<p class="pos"></p>
									<h1></h1>
								</a>
							</div>
						</li>
						<li class="sHoverItem"><img alt="" title="" class="lazyload" src="img/img_hx/湘菜2.jpg">
							<div class="mask">
								<a href="">
									<p>剁椒鱼头</p>
									<p>选用新鲜鱼头，剁椒调味，肉质鲜嫩，麻辣可口。</p>
									<p></p>
									<p class="jj">剁椒鱼头是一道经典的湘菜，以鲜嫩的鱼头为主料，搭配剁椒蒸制而成，味道鲜美，辣味十足，非常受欢迎。</p>
									<p class="pos"></p>
									<h1></h1>
								</a>
							</div>
						</li>
					</ul>
					<!--藏品分类查询表的开始-->
					<div class="popWindow pop-type">
						<a href="javascript:;" class="close"></a>
						<div>
							<div class="title">
								<h1 style="margin-top:16px;"><b>二</b><b>十</b><b>三</b>个品类藏品</h1>
								<h2></h2>
							</div>

							<div class="table">
								<ul>
									<li>
										<a href="">陶瓷</a>
									</li>
									<li>
										<a href="">绘画</a>
									</li>
									<li>
										<a href="">法书</a>
									</li>
									<li>
										<a href="">铭刻</a>
									</li>
									<li>
										<a href="">青铜器</a>
									</li>
									<li>
										<a href="">玺印</a>
									</li>
									<li>
										<a href="">织绣</a>
									</li>
									<li>
										<a href="">文房用品</a>
									</li>
									<li>
										<a href="">家具</a>
									</li>
									<li>
										<a href="">钟表仪器</a>
									</li>
									<li>
										<a href="">珐琅</a>
									</li>
									<li>
										<a href="">漆器</a>
									</li>
									<li>
										<a href="">雕塑</a>
									</li>
									<li>
										<a href="">金银锡器</a>
									</li>
									<li>
										<a href="">玉石器</a>
									</li>
									<li>
										<a href="">玻璃器</a>
									</li>
									<li>
										<a href="">竹木牙角匏</a>
									</li>
									<li>
										<a href="">宫廷宗教</a>
									</li>
									<li>
										<a href="">首饰</a>
									</li>
									<li>
										<a href="">武备仪仗</a>
									</li>
									<li>
										<a href="">音乐戏曲</a>
									</li>
									<li>
										<a href="">生活器具</a>
									</li>
									<li>
										<a href="">外国文物</a>
									</li>
									<li>
										<a href="">藏品搜索</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<!--藏品分类查询表的结束-->
				</div>

		<!--故宫藏品的开始-->
	<!--博物馆活动（红色块）的开始-->
				<div class="block3">
					<!--右边故宫名画记图片的开始-->

                    <div class="img" style="background-image: url(img/img_hx/纹理2.jpg)">
                        <model-viewer src="./model/ceramics_chinese_dragon.glb" alt="A 3D model" auto-rotate camera-controls style="height: 100%;width: 100%" ></model-viewer>
                    </div>


					<!--右边故宫名画记图片的开始-->
					<!--博物馆活动的开始-->
					<div class="box">
						<div class="title">
							<h1 style="background:none !important;">
                        <span class="tit-span"><img src="img/public-icon1.png"></span>
                        <span class="s1">我们的功能</span>
                        <span class="tit-span"><img src="img/public-icon2.png"></span>
                    </h1>
						</div>
						<div>
							<ul>
								<li>
									<h3><a href="" target="_blank">湖湘文化分类查询</a></h3>
									<p>　　为研究者和爱好者提供湖湘文化的分类查询工具，旨在帮助读者了解和探索湖湘文化的各个方面和特点...</p>
									<a href="" class="link" target="_blank">更多</a>
								</li>
								<li>
									<h3><a href="" target="_blank">湖湘文化传播舆论情感分析</a></h3>
									<p>　　分析当前舆论对于湖湘文化的情感倾向，展现群众对湖湘文化的价值认知与情感共鸣，识别潜在的舆论危机...</p>
									<a href="" class="link" target="_blank">更多</a>
								</li>
								<li>
									<h3><a href="" target="_blank">湖湘文化影响力分析预测</a></h3>
									<p>评估湖湘文化在各个领域的影响力，并基于现有数据和趋势进行未来影响力预测...
									</p>
									<a href="" class="link" target="_blank">更多</a>
								</li>
								<li>
									<h3><a href="" target="_blank">湖湘文化自动生成传播效果分析报告</a></h3>
									<p>自动生成对湖湘文化传播现状的分析报告，为研究者、文化工作者和政策制定者提供全面的信息支持...
									</p>
									<a href="" class="link" target="_blank">更多</a>
								</li>
							</ul>
						</div>
					</div>
					<!--博物馆活动的结束-->

				</div>
			</div>
		</div>
		<!--轮播结束-->

		<script>
            // 添加一个函数用于查询节点
            function searchNode() {
                // 获取输入的节点名称
                const nodeName = document.getElementById('nodeInput').value.trim();

                // 找到包含输入字符串的节点（模糊查询）
                const node = data.find(item => item.name && item.name.toLowerCase().includes(nodeName.toLowerCase()));


                // 显示节点信息
                if (node) {
                    // 更新节点名称
                    document.getElementById('nodeName').textContent = `节点名称：${node.name}`;

                    // 更新节点描述
                    document.getElementById('nodeDescription').textContent = `节点描述：${node.properties.text}`;

                    // 存储节点 ID 以便查看详情时使用
                    document.getElementById('detailsButton').setAttribute('data-node-id', node.id);
                    // 使用 echarts API 使得该节点居中

                } else {
                    // 如果没有找到节点
                    alert('没有找到相关节点！');
                }
            }

            // 为查询按钮添加点击事件监听器
            function viewDetails() {
                console.log("调用查看详情功能")
                const nodeId = document.getElementById('detailsButton').getAttribute('data-node-id');
                const node = data.find(item => item.id === nodeId);

                if (node) {
                    console.log(node.id)
                    // 判断节点是否有描述链接（describe_url），如果没有则打开图像链接（img_url）
                    const urlToOpen = node.properties.description_url || node.properties.img_url;

                    if (urlToOpen) {
                        // 打开链接
                        window.open(urlToOpen, '_blank');
                    } else {
                        alert('该节点没有可用的详细信息链接！');
                    }
                } else {
                    alert('节点信息不存在！');
                }
            }
            let data = [];
            let links = [];

            async function loadData() {
                try {
                    // 使用 await 等待 fetch 完成
                    const response = await fetch('data.json');
                    const json = await response.json();

                    // 将数据赋值
                    data = json.data;
                    links = json.links;
                    initChart();
                    // 输出加载的数据
                    // console.log(data);
                    // console.log(links);
                } catch (error) {
                    console.error('Error loading the JSON file:', error);
                }
            }
            // 初始化图表
            function initChart() {
                var myChart = echarts.init(document.getElementById('graph'));

                var option = {
                    title: {
                        text: ''
                    },
                    tooltip: {},
                    animationDurationUpdate: 1500,
                    animationEasingUpdate: 'quinticInOut',
                    label: {
                        normal: {
                            show: true, // 确保标签显示
                            textStyle: {
                                fontSize: 12,
                            },
                        }
                    },
                    legend: {
                        x: "center",
                        show: false
                    },
                    series: [
                        {
                            type: 'graph',
                            layout: 'force',
                            symbolSize: 45,
                            focusNodeAdjacency: true,
                            roam: true,
                            edgeSymbol: ['none', 'none'],
                            categories: [{
                                name: 'Spot',
                                itemStyle: {
                                    normal: {
                                        color: "#009800",
                                    }
                                }
                            }, {
                                name: 'Literature',
                                itemStyle: {
                                    normal: {
                                        color: "#4592FF",
                                    }
                                }
                            }, {
                                name: 'Food',
                                itemStyle: {
                                    normal: {
                                        color: "#C71585",
                                    }
                                }
                            }, {
                                name: 'Folk',
                                itemStyle: {
                                    normal: {
                                        color: "#ffb6c1",
                                    }
                                }
                            }], label: {
                                normal: {
                                    show: true,
                                    textStyle: {
                                        fontSize: 12,
                                    },
                                }
                            },
                            force: {
                                repulsion: 1000
                            },
                            edgeSymbolSize: [4, 50],
                            edgeLabel: {
                                normal: {
                                    show: true,
                                    textStyle: {
                                        fontSize: 10
                                    },
                                    formatter: function (params) {
                                        // 使用链接数据中的 name 字段
                                        return params.data.name || '从属';  // 如果没有 name，显示“连接”
                                    }
                                }
                            },
                            data: data.map(function (node) {
                                // 确保在节点数据中为每个节点设置正确的 `category` 索引
                                if (node.categories === 'Spot') {
                                    node.category = 0;  // Spot -> category 0
                                } else if (node.categories === 'Literature') {
                                    node.category = 1;  // Literature -> category 1
                                } else if (node.categories === 'Food') {
                                    node.category = 2;  // Food -> category 2
                                } else if (node.categories === 'Folk') {
                                    node.category = 3;  // Folk -> category 3
                                }
                                return node;
                            }),
                            links: links,
                            lineStyle: {
                                normal: {
                                    opacity: 0.9,
                                    width: 1.3,
                                    curveness: 0,
                                    color: "#262626",
                                }
                            },

                        }
                    ]
                };

                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
                myChart.on('click', function (params) {
                    if (params.data && params.data.id) {
                        // 获取被点击节点的信息
                        const node = data.find(item => item.id === params.data.id);
                        if (node) {
                            // 更新右侧显示的信息
                            document.getElementById('nodeName').textContent = `节点名称：${node.name}`;
                            document.getElementById('nodeDescription').textContent = `节点描述：${node.properties.text}`;
                            document.getElementById('detailsButton').setAttribute('data-node-id', node.id);
                        }
                    }
                });

            }


            // 调用异步函数来加载数据
            loadData();

            var myChart = echarts.init(document.getElementById('graph'));






            //四季皮肤变化效果的开始
            $('.season i').bind('click', function(e) {
                var _that = $(this),
                    text = _that.text(),
                    $span = $('.season').find('span').eq(0);
                $span.text(text);
                $('#container').removeClass();
                var seasonal = '';
                $('.block1 .right .box3 .i1').show();
                if(text == "博") {
                    $('.skin_common').hide();
                    $('.skin_518').show();
                } else {
                    $('.skin_common').show();
                    $('.skin_518').hide();
                }
                switch(text) {
                    case "年":
                        $('#container').addClass('home newyear2019');
                        seasonal = '年';
                        $('.block1 .right .box3 .i1').hide();
                        $('.newyear2019.home .block1 .box4 .list .last h1').css('background-image', 'none');
                        break;
                    case "庆":
                        $('#container').addClass('home years93');
                        seasonal = '庆';
                        break;
                    case "博":

                        $('#container').addClass('home ');
                        seasonal = '博';
                        break;
                    case "春":
                        $('#container').addClass('home spring');
                        seasonal = '春';
                        break;
                    case "夏":
                        $('#container').addClass('home summer');
                        seasonal = '夏';
                        break;
                    case "秋":
                        $('#container').addClass('home fall');
                        seasonal = '秋';
                        break;
                    case "冬":
                        $('#container').addClass('home winter');
                        seasonal = '冬';
                        break;
                    case "常":
                        $('#container').addClass('home normal');
                        seasonal = 'normal';
                        break;
                }
                setTimeout(function() {
                    $(".scrolllist .img img").each(function() {
                        if(!$(this).is(":hidden")) {
                            $('.block4 .caroufredsel_wrapper,.block4 .caroufredsel_wrapper ul').css('height', $(this).height());
                        }
                    });
                }, 500);

                CONFIG.setSeasonal(seasonal);
                return false;
            });
            //四季皮肤变化效果的结束

            $('.focus').height($(window).height())

            $('.home .focus li').mChange({
                auto: 1, //是否自动播放,1为自动,0为手动
                arrow: 1, //是否反转箭头,1为点击左侧向右滚动,0则相反
                speed: 1000, //效果速度,大于0.3
                time: 5000, //周期时间，大于1
                nav: $('.home .focus .nav i'), //导航
                nave: "click", //导航事件
                navs: 0, //导航滚动
                prev: ".home .focus .prev a", //上一个
                next: ".home .focus .next a", //下一个
                cycle: 1, //是否循环
                mousestop: 0, //是否鼠标划入停止
                mousewheel: 0, //是否开启滚轮事件
                animates: function(idx) {} //自定义函数
            });
            //底部图书馆-视听馆这一块的效果
            $(window).on('load', function() {
                var smask = new sHover("sHoverItem", "mask");
                $('.block4 ul').carouFredSel({
                    auto: false,
                    responsive: true,
                    circular: false,
                    infinite: false,
                    items: 6,
                    onCreate: function(items, sizes) {
                        setTimeout(function() {
                            $(".scrolllist .img").eq(0).find("img").each(function(i) {
                                if(!$(this).is(":hidden")) {
                                    $('.block4 .caroufredsel_wrapper,.block4 .caroufredsel_wrapper ul').css('height', $(this).height());
                                }
                            });

                        }, 800);
                    }
                });


                $('a.link').each(function(index, element) {
                    var lineWrap = '<div id="line' + index + '"></div>';
                    $(this).append(lineWrap);
                    $(this).children('div').css({
                        'position': 'absolute',
                        'left': 0,
                        'top': 0,
                        'right': 0,
                        'bottom': 0
                    });
                    cline('line' + index);
                });

                function cline(obj) {
                    var elm = document.getElementById(obj);
                    var paper = Raphael(elm);
                    var lw = $(elm).width() - 10;
                    var lh = $(elm).height() - 10;
                    var line = paper.path("M0, 5L5, 5L5, 0L" + (lw + 5) + ",0L" + (lw + 5) + ",5L" + (lw + 10) + ",5L" + (lw + 10) + "," + (lh + 5) + "L" + (lw + 5) + "," + (lh + 5) + "L" + (lw + 5) + "," + (lh + 10) + "L5," + (lh + 10) + "L5," + (
                        lh + 5) + "L0," + (lh + 5) + "L0, 5").attr({
                        stroke: '#fff',
                        'stroke-width': 2
                    });

                    $('.block3 path').attr('stroke', '#ab8181');

                    $(elm).find('svg').css('left', 0);
                    $('path').attr('stroke-dasharray', '1000,1000');
                    $(elm).hover(function() {
                        $(this).find('path').stop(true, true).transition({
                            'stroke-dashoffset': -1000,
                            'stroke-dasharray': '500,500'
                        }, 500);
                    }, function() {
                        $(this).find('path').transition({
                            'stroke-dashoffset': 0
                        }, 500);
                    });
                };

            });
            //右侧导航条回到顶部的效果
            $('.sidebar .close').click(function() {
                if(!$(this).hasClass('up')) {
                    $(this).addClass('up');
                    $('.sidebar ul').slideUp(300);
                } else {
                    $(this).removeClass('up');
                    $('.sidebar ul').slideDown(300);
                }
            });

        </script>
	</body>
</html>
