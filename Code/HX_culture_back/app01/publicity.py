from zhipuai import ZhipuAI
import os
from django.http import JsonResponse
from django.views.decorators.http import require_http_methods
import json

API_KEY = os.getenv("1af4f35363ea97ed269ee3099c04f7f3.3AGroi22UtegCtjf", "1af4f35363ea97ed269ee3099c04f7f3.3AGroi22UtegCtjf")
client = ZhipuAI(api_key=API_KEY)

# å®šä¹‰ä¸åŒå¹³å°çš„æç¤ºæ¨¡æ¿
PLATFORM_PROMPTS = {
    # ä¸€ã€ç¤¾äº¤ç§è‰å¹³å°
    "å°çº¢ä¹¦": lambda event_info: f"""
{event_info}

è¯·ç”Ÿæˆä¸€ç¯‡å°çº¢ä¹¦é£æ ¼çš„æ–‡æ¡ˆï¼Œè¦æ±‚ï¼š
1. æ ‡é¢˜å¿…é¡»å®Œæ•´åŒ…å«æ´»åŠ¨åç§°ä¸­çš„å…³é”®è¯ï¼Œå¹¶è‡ªç„¶èå…¥ç½‘ç»œçƒ­è¯
2. æ­£æ–‡ä¸­è‡³å°‘3æ¬¡è‡ªç„¶æåŠæ´»åŠ¨åç§°ä¸­çš„å…³é”®è¯
3. å†…å®¹åˆ†ç‚¹æè¿°ï¼Œæ¯ä¸ªè¦ç‚¹é…ä¸Šåˆé€‚çš„emoji
4. è®¾è®¡2-3ä¸ªä¸æ´»åŠ¨åç§°ç›¸å…³çš„æ‰“å¡ç‚¹
5. æœ€åçš„è¯é¢˜æ ‡ç­¾å¿…é¡»åŒ…å«æ´»åŠ¨åç§°çš„æ ¸å¿ƒè¯
6. æ ‡é¢˜è¦å¸å¼•å¹´è½»äººçœ¼çƒï¼Œå¯ä»¥é€‚å½“åŠ å…¥ç½‘ç»œçƒ­è¯
7. çªå‡ºæ´»åŠ¨çš„ä½“éªŒæ„Ÿå’Œå‚ä¸æ„Ÿ
8. æœ€ååŠ ä¸Š3-5ä¸ªç›¸å…³è¯é¢˜æ ‡ç­¾
9. è¯­è¨€é£æ ¼è¦æ´»æ³¼è‡ªç„¶ï¼Œå¯Œæœ‰æ„ŸæŸ“åŠ›""",

    "å¾®åš": lambda title, tags: f"""ä½œä¸ºèµ„æ·±æ¹–æ¹˜æ–‡åŒ–ä¼ æ’­ç­–åˆ’å¸ˆï¼Œè¯·ä¼˜åŒ–ä»¥ä¸‹å†…å®¹ä»¥é€‚åº”å¾®åšä¼ æ’­ï¼š
ğŸ“Œ æ ‡é¢˜ï¼š{title}ï¼ˆè¦æ±‚ï¼šçƒ­æœå¼æ ‡é¢˜+è¯é¢˜å¼•å¯¼ï¼‰
ğŸ·ï¸ æ ‡ç­¾ï¼šä¸»è¯é¢˜#{tags}#ï¼Œé…åˆ3-5ä¸ªç›¸å…³è¯é¢˜
ğŸ“± å½¢å¼ï¼šå›¾æ–‡ç»“åˆï¼Œé…å›¾æ–‡æ¡ˆç‚¹é¢˜
ğŸ“¢ è°ƒæ€§ï¼šç®€çŸ­æœ‰åŠ›ï¼Œçªå‡ºä¼ æ’­æ€§ï¼Œè®¾ç½®äº’åŠ¨æœºåˆ¶
âœï¸ ä¼˜åŒ–è¦æ±‚ï¼šæ§åˆ¶åœ¨140å­—å†…ï¼Œè®¾è®¡2-3ä¸ªäº’åŠ¨è¯é¢˜ï¼Œå¢åŠ è½¬å‘æ¿€åŠ±""",

    # äºŒã€çŸ­è§†é¢‘å¹³å°
    "æŠ–éŸ³": lambda event_info, content_info: f"""
{event_info}
{content_info}

è¯·ç”Ÿæˆä¸€ä¸ªæŠ–éŸ³è§†é¢‘æ–‡æ¡ˆï¼Œè¦æ±‚ï¼š
1. å¼€åœºè¦æœ‰å¸å¼•åŠ›ï¼Œå¯ä»¥è®¾ç½®æ‚¬å¿µæˆ–åè½¬
2. å†…å®¹èŠ‚å¥è¦ç´§å‡‘ï¼Œæ¯20ç§’ä¸€ä¸ªé‡ç‚¹
3. åŠ å…¥2-3ä¸ªé€‚åˆæ‹æ‘„çš„ç”»é¢å»ºè®®
4. è®¾è®¡äº’åŠ¨å¼•å¯¼å’Œè¯é¢˜æ ‡ç­¾
5. å¯ä»¥æ¨è2-3é¦–é…ä¹é£æ ¼
6. çªå‡ºæ´»åŠ¨çš„è§†è§‰äº®ç‚¹å’Œå‚ä¸ç¯èŠ‚""",

    "Bç«™": lambda event_info, content_info: f"""
{event_info}
{content_info}

è¯·ç”Ÿæˆä¸€ä¸ªBç«™è§†é¢‘è„šæœ¬ï¼Œè¦æ±‚ï¼š
1. æ ‡é¢˜è¦æœ‰æ¢—ï¼Œå¸å¼•å¹´è½»æ–‡åŒ–çˆ±å¥½è€…
2. å†…å®¹æ—¢è¦ä¸“ä¸šåˆè¦æœ‰è¶£
3. å¯ä»¥åŠ å…¥ä¸€äº›äºŒæ¬¡å…ƒæ–‡åŒ–å…ƒç´ 
4. è®¾è®¡3-4ä¸ªå¼¹å¹•äº’åŠ¨ç‚¹
5. çªå‡ºçŸ¥è¯†æ€§å’Œè¶£å‘³æ€§çš„ç»“åˆ
6. å¯ä»¥è®¾è®¡ä¸€ä¸ªç®€å•çš„äº’åŠ¨ç¯èŠ‚""",

    # ä¸‰ã€æ”¿åŠ¡å‘å¸ƒå¹³å°
    "æ”¿åºœå¹³å°": lambda event_info, content_info: f"""
{event_info}
{content_info}

è¯·ç”Ÿæˆä¸€ç¯‡æ”¿åŠ¡å¹³å°å‘å¸ƒå†…å®¹ï¼Œè¦æ±‚ï¼š
1. æ ‡é¢˜è¦åº„é‡è§„èŒƒ
2. å†…å®¹è¦çªå‡ºæ´»åŠ¨çš„æ”¿ç­–æ„ä¹‰å’Œç¤¾ä¼šä»·å€¼
3. åŠ å…¥ç›¸å…³æ”¿ç­–æ”¯æŒå’Œæ•°æ®æ”¯æ’‘
4. å¼ºè°ƒæ´»åŠ¨çš„ç¤ºèŒƒå¼•é¢†ä½œç”¨
5. æ³¨é‡æ–‡åŒ–ä¼ æ‰¿å’Œåˆ›æ–°çš„ç»“åˆ
6. è¯­è¨€è¦ä¸¥è°¨è§„èŒƒ""",

    "å…šå»ºå¹³å°": lambda title, tags, content: f"""è¯·ç”Ÿæˆä¸€ç¯‡å…šå»ºå¹³å°å†…å®¹ï¼š
ğŸ¯ æ ‡é¢˜ï¼š{title}
ğŸ·ï¸ ç›¸å…³æ ‡ç­¾ï¼š{tags}
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼š
1. çªå‡ºæ€æƒ³å¼•é¢†
2. ä½“ç°ç†è®ºæ·±åº¦
3. è”ç³»å®é™…å·¥ä½œ
4. æ€»ç»“ç»éªŒå¯ç¤º""",

    # å››ã€æ–°é—»åª’ä½“æŠ¥é“
    "æ–°é—»åª’ä½“": lambda title, tags, content: f"""è¯·ç”Ÿæˆä¸€ç¯‡æ–°é—»æŠ¥é“ï¼š
ğŸ¯ æ ‡é¢˜ï¼š{title}
ğŸ·ï¸ ç›¸å…³æ ‡ç­¾ï¼š{tags}
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼š
1. æ ‡é¢˜æ–°é—»æ€§å¼º
2. éµå¾ª5W1HåŸåˆ™
3. å®¢è§‚æŠ¥é“äº‹å®
4. çªå‡ºæ–°é—»ä»·å€¼""",

    # äº”ã€è¡¥å……æ¨¡æ¿ç±»å‹
    "æµ·å¤–ä¼ æ’­": lambda title, tags, content: f"""è¯·ç”Ÿæˆä¸€ç¯‡é¢å‘æµ·å¤–çš„æ–‡åŒ–ä¼ æ’­å†…å®¹ï¼š
ğŸŒ æ ‡é¢˜ï¼š{title}
ğŸ·ï¸ ç›¸å…³æ ‡ç­¾ï¼š{tags}
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼š
1. æ³¨é‡æ–‡åŒ–è§£è¯»
2. çªå‡ºå›½é™…è§†è§’
3. é¿å…æ–‡åŒ–è¯¯è§£
4. å¢è¿›æ–‡åŒ–å…±é¸£""",

    "çº¿ä¸‹ç‰©æ–™": lambda title, tags, content: f"""è¯·è®¾è®¡çº¿ä¸‹å®£ä¼ ç‰©æ–™æ–‡æ¡ˆï¼š
ğŸ“‘ æ ‡é¢˜ï¼š{title}
ğŸ·ï¸ ç›¸å…³æ ‡ç­¾ï¼š{tags}
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼š
1. çªå‡ºè§†è§‰æ•ˆæœ
2. æ–‡å­—ç®€æ´æœ‰åŠ›
3. ä¾¿äºå¿«é€Ÿé˜…è¯»
4. çªå‡ºæ´»åŠ¨äº®ç‚¹""",

    "ç ”å­¦æ´»åŠ¨": lambda title, tags, content: f"""è¯·è®¾è®¡ç ”å­¦æ´»åŠ¨æ–¹æ¡ˆï¼š
ğŸ’ å¯¹è±¡ï¼šé’å°‘å¹´ç¾¤ä½“
ğŸ“š æ¨¡å—ï¼šçŸ¥è¯†ä¼ æˆ+å®è·µä½“éªŒ+äº’åŠ¨æ¢ç©¶
ğŸ¯ ç›®æ ‡ï¼šå¯“æ•™äºä¹ï¼Œä¼ æ‰¿æ–‡åŒ–
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼šè®¾è®¡3ä¸ªè¯¾ç¨‹æ¨¡å—ï¼Œé…å¥—1ä¸ªå®è·µæ´»åŠ¨""",

    "å•†ä¸šåˆä½œ": lambda title, tags, content: f"""è¯·ç”Ÿæˆå•†ä¸šåˆä½œæ¨å¹¿æ–¹æ¡ˆï¼š
ğŸ’¼ å½¢å¼ï¼šå“ç‰Œè”å/æˆæƒåˆä½œ
ğŸ“ˆ äº®ç‚¹ï¼šæ–‡åŒ–IPä»·å€¼è½¬åŒ–
ğŸ¯ ç›®æ ‡ï¼šå•†ä¸šä»·å€¼ä¸æ–‡åŒ–ä¼ æ’­åŒèµ¢
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼šæ˜ç¡®å•†ä¸šæƒç›Šï¼Œè®¾å®šè¥é”€æŒ‡æ ‡""",

    "å­¦æœ¯ç ”ç©¶": lambda title, tags, content: f"""è¯·ç”Ÿæˆå­¦æœ¯ç ”ç©¶æŠ¥å‘Šï¼š
ğŸ“ ç±»å‹ï¼šæ–‡åŒ–ä¼ æ’­ç ”ç©¶/ä¿æŠ¤ç ”ç©¶
ğŸ“š æ¡†æ¶ï¼šç†è®ºä¾æ®+ç ”ç©¶æ–¹æ³•+æ•°æ®åˆ†æ
ğŸ” é‡ç‚¹ï¼šæ–‡åŒ–ä»·å€¼ç ”ç©¶ä¸ä¼ æ’­æ•ˆæœè¯„ä¼°
ğŸ“ åŸå§‹å†…å®¹ï¼š{content}
âœï¸ è¦æ±‚ï¼šå­¦æœ¯è§„èŒƒï¼Œéœ€æœ‰ç†è®ºæ”¯æ’‘å’Œæ•°æ®è®ºè¯"""
}

# åˆ¤æ–­å†…å®¹æ˜¯è‰ç¨¿è¿˜æ˜¯éœ€æ±‚æè¿°
def detect_content_type(content: str) -> str:
    if len(content.strip()) < 50 or any(keyword in content for keyword in ["ç›®æ ‡", "å—ä¼—", "å¯¹è±¡", "æ¸ é“", "é™åˆ¶", "äººç¾¤"]):
        return "éœ€æ±‚è¯´æ˜"
    elif "ã€‚" in content or "ï¼Œ" in content:
        return "è‰ç¨¿æ–‡"
    else:
        return "ä¸ç¡®å®š"

def generate_simple_report(data):
    """ç”Ÿæˆå®£ä¼ æ–‡æ¡ˆçš„ä¸»å‡½æ•°"""
    try:
        # è·å–åŸºæœ¬ä¿¡æ¯
        title = data["title"]
        content = data["content"]
        platform = data["platform"]
        tags = ", ".join(data.get("tags", []))
        event_name = data["eventName"]
        event_type = data["eventType"]
        promotion_tendency = data["promotionTendency"]
        promotion_method = data["promotionMethod"]
        
        # æ„å»ºæ´»åŠ¨åŸºæœ¬ä¿¡æ¯
        event_context = f"""
æ´»åŠ¨åç§°ï¼š{event_name}
æ´»åŠ¨å±æ€§ï¼š{event_type}
å®£ä¼ å€¾å‘ï¼š{promotion_tendency}
å®£ä¼ æ–¹å¼ï¼š{promotion_method}
ç›¸å…³æ ‡ç­¾ï¼š{tags}
"""

        # æ ¹æ®æ˜¯å¦æä¾›æ ‡é¢˜å’Œå†…å®¹æ„å»ºä¸åŒçš„åˆ†ææç¤º
        content_context = ""
        if title and content:
            content_context = f"""
å‚è€ƒæ ‡é¢˜ï¼š{title}
å‚è€ƒå†…å®¹ï¼š{content}

è¯·åŸºäºä»¥ä¸Šå‚è€ƒå†…å®¹è¿›è¡Œä¼˜åŒ–å’Œæ‰©å±•ã€‚"""
        elif title:
            content_context = f"""
å‚è€ƒæ ‡é¢˜ï¼š{title}

è¯·å‚è€ƒè¿™ä¸ªæ ‡é¢˜çš„é£æ ¼å’Œé‡ç‚¹è¿›è¡Œå†…å®¹åˆ›ä½œï¼Œè®°ä½ï¼Œæ ‡é¢˜ååˆ†é‡è¦ã€‚"""
        elif content:
            content_context = f"""
å‚è€ƒå†…å®¹ï¼š{content}

è¯·åœ¨ä¿æŒæ ¸å¿ƒä¿¡æ¯çš„åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–å’Œæ‰©å±•ã€‚"""

        # ç”Ÿæˆä¸»è¦å†…å®¹
        main_content = ""
        if platform in PLATFORM_PROMPTS:
            # æ ¹æ®å¹³å°ç±»å‹è°ƒç”¨å¯¹åº”çš„ lambda å‡½æ•°
            if platform == "å°çº¢ä¹¦":
                prompt = PLATFORM_PROMPTS[platform](event_context)
            elif platform == "å¾®åš":
                prompt = PLATFORM_PROMPTS[platform](title, tags)
            else:
                # å…¶ä»–å¹³å°çš„å¤„ç†...
                prompt = PLATFORM_PROMPTS[platform](title, tags)
                
            response = client.chat.completions.create(
                model="glm-4",
                messages=[{
                    "role": "user", 
                    "content": f"""ä½œä¸ºä¸€åä¸“ä¸šçš„æ–‡åŒ–æ´»åŠ¨ç­–åˆ’å¸ˆï¼Œè¯·æ ¹æ®ä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆä¸€ç¯‡å¯Œæœ‰æ„ŸæŸ“åŠ›çš„å®£ä¼ å†…å®¹ï¼š

{prompt}

è¯·ç¡®ä¿ç”Ÿæˆçš„å†…å®¹ï¼š
1. ç´§å¯†å›´ç»•æ´»åŠ¨ä¸»é¢˜å’Œç›®æ ‡ï¼Œå°¤å…¶æ˜¯æ´»åŠ¨åç§°ï¼Œä¸€å®šè¦æœ‰ä½“ç°
2. çªå‡ºæ´»åŠ¨ç‰¹è‰²å’Œäº®ç‚¹
3. ç¬¦åˆç›®æ ‡å¹³å°çš„ä¼ æ’­ç‰¹ç‚¹
4. æ³¨é‡æ–‡åŒ–ä¼ æ‰¿å’Œåˆ›æ–°
5. å¸å¼•ç›®æ ‡å—ä¼—å‚ä¸äº’åŠ¨
6. æ ‡é¢˜å¿…é¡»åŒ…å«æ´»åŠ¨åç§°ä¸­çš„2-3ä¸ªæ ¸å¿ƒè¯
7. æ­£æ–‡å‰100å­—å¿…é¡»æ˜ç¡®æåŠå®Œæ•´æ´»åŠ¨åç§°
ğŸ“¢ ç¡¬æ€§è¦æ±‚ï¼š
1. æ´»åŠ¨åç§°"{event_name}"å¿…é¡»å®Œæ•´å‡ºç°åœ¨æ­£æ–‡å‰ä¸¤æ®µ
2. åç§°ä¸­çš„å…³é”®è¯ï¼ˆå¦‚"{'ã€'.join(event_name.split())}"ï¼‰éœ€åœ¨å…¨æ–‡å‡ºç°3æ¬¡ä»¥ä¸Š
ğŸ¯ åˆ›ä½œæŠ€å·§ï¼š
1. æŠŠåç§°æ‹†è§£ä¸ºè®°å¿†ç‚¹ï¼ˆç¤ºä¾‹ï¼š"ç‘¶æ—ä¼ ç»Ÿ|æ–‡åŒ–å±•ç¤º|æ¹˜è¥¿ç››ä¼š"ï¼‰
2. åœ¨æ¯éƒ¨åˆ†å†…å®¹è‡ªç„¶æ¤å…¥åç§°è¦ç´ 
3. å°†åç§°å…³é”®è¯ä¸å¹³å°ç‰¹è‰²ç»“åˆï¼ˆå¦‚å°çº¢ä¹¦æ‰“å¡ç‚¹å‘½åï¼‰

æ³¨æ„ï¼š
1. ä¸è¦ä½¿ç”¨ \\n ä½œä¸ºæ¢è¡Œï¼Œä½¿ç”¨ markdown æ ¼å¼
2. ä½¿ç”¨ # ## ### ç­‰æ ‡è®°æ¥æ ‡è¯†æ ‡é¢˜å±‚çº§
3. æ­£æ–‡å†…å®¹ä½¿ç”¨æ®µè½æ ¼å¼ï¼Œä¸è¦åŠ å¤šä½™çš„æ¢è¡Œ
4. å®£ä¼ ç­–ç•¥å»ºè®®éƒ¨åˆ†ä½¿ç”¨è§„èŒƒçš„ markdown æ ¼å¼"""
                }]
            )
            main_content = response.choices[0].message.content.strip()

        # ç”Ÿæˆå®£ä¼ ç­–ç•¥å»ºè®®
        strategy_prompt = f"""
åŸºäºä»¥ä¸‹æ´»åŠ¨ä¿¡æ¯ï¼Œè¯·ç”Ÿæˆè¯¦ç»†çš„å®£ä¼ ç­–ç•¥å»ºè®®ï¼š

{event_context}

è¯·ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æä¾›å»ºè®®ï¼ˆä½¿ç”¨markdownæ ¼å¼ï¼‰ï¼š

### å®£ä¼ ç­–ç•¥å»ºè®®

#### 1. æœ€ä½³å‘å¸ƒæ—¶é—´å’Œé¢‘ç‡
- å…·ä½“è¯´æ˜å‘å¸ƒæ—¶é—´å’Œé¢‘ç‡å®‰æ’

#### 2. å†…å®¹å‘ˆç°å½¢å¼
- è¯¦ç»†è¯´æ˜å¦‚ä½•é€šè¿‡{platform}å¹³å°è¿›è¡Œå®£ä¼ 
- æ ¹æ®æ´»åŠ¨ç‰¹ç‚¹è®¾è®¡å†…å®¹å½¢å¼

#### 3. äº’åŠ¨ç­–ç•¥
- è®¾è®¡ä¸æ´»åŠ¨ä¸»é¢˜å¼ºç›¸å…³çš„äº’åŠ¨æ–¹æ¡ˆ
- æä¾›å¸å¼•ç›®æ ‡å—ä¼—çš„å…·ä½“æ–¹æ³•

è¯·ç¡®ä¿å»ºè®®å…·ä½“å¯è¡Œï¼Œä¾¿äºæ‰§è¡Œã€‚
æ³¨æ„ï¼šä½¿ç”¨markdownæ ¼å¼ï¼Œä¸è¦ä½¿ç”¨\\næ¢è¡Œ"""

        strategy_response = client.chat.completions.create(
            model="glm-4-air",
            messages=[{"role": "user", "content": strategy_prompt}]
        )
        strategy_content = strategy_response.choices[0].message.content.strip()

        # ç»„åˆå†…å®¹å’Œç­–ç•¥ï¼Œä½¿ç”¨markdownæ ¼å¼
        final_content = f"""
{main_content}

â”â”â”â”â”â”â”â”â”â” å®£ä¼ ç­–ç•¥å»ºè®® â”â”â”â”â”â”â”â”â”â”

{strategy_content}"""

        return final_content.strip()
    except Exception as e:
        print(f"ç”ŸæˆæŠ¥å‘Šæ—¶å‡ºé”™: {str(e)}")
        raise e

@require_http_methods(["POST"])
def generate_publicity_report(request):
    """å¤„ç†ç”Ÿæˆå®£ä¼ æŠ¥å‘Šçš„è¯·æ±‚"""
    try:
        data = json.loads(request.body)
        
        # éªŒè¯å¿…è¦å­—æ®µ
        required_fields = ["platform", "eventName", "eventType"]  # ä¿®æ”¹å¿…è¦å­—æ®µ
        for field in required_fields:
            if field not in data:
                return JsonResponse({
                    'code': 400,
                    'message': f'ç¼ºå°‘å¿…è¦å­—æ®µï¼š{field}',
                    'data': None
                })
        
        # éªŒè¯å¹³å°ç±»å‹
        if data["platform"] not in PLATFORM_PROMPTS:
            return JsonResponse({
                'code': 400,
                'message': f'ä¸æ”¯æŒçš„å¹³å°ç±»å‹ï¼š{data["platform"]}',
                'data': None
            })
        
        # ç”ŸæˆæŠ¥å‘Š
        report = generate_simple_report(data)
        
        return JsonResponse({
            'code': 200,
            'message': 'success',
            'data': {
                'report': report,
                'platform': data["platform"]
            }
        })
    except json.JSONDecodeError:
        return JsonResponse({
            'code': 400,
            'message': 'æ— æ•ˆçš„JSONæ ¼å¼',
            'data': None
        })
    except Exception as e:
        return JsonResponse({
            'code': 500,
            'message': f'ç”ŸæˆæŠ¥å‘Šå¤±è´¥ï¼š{str(e)}',
            'data': None
        })

# æµ‹è¯•æ•°æ®
test_data = {
    "tags": ["æ¹–æ¹˜æ–‡åŒ–", "éé—ä¼ æ‰¿"],
    "title": "åƒå¹´ç‘¶æ—ä¼ ç»Ÿï¼Œè—åœ¨æ¹˜è¥¿æ·±å¤„çš„æ–‡åŒ–ç‘°å®",
    "content": "ç‘¶æ—ä¼ ç»Ÿæ–‡åŒ–å±•ç¤ºæ´»åŠ¨å°†åœ¨æ¹˜è¥¿ä¸¾è¡Œï¼Œå±•ç¤ºç‘¶æ—ä¼ ç»Ÿæœé¥°åˆ¶ä½œã€æ­Œèˆè¡¨æ¼”ç­‰éç‰©è´¨æ–‡åŒ–é—äº§ã€‚",
    "platform": "å°çº¢ä¹¦"  # æŒ‡å®šå¹³å°
}

if __name__ == "__main__":
    result = generate_simple_report(test_data)
    print("\nğŸ“£ ç”Ÿæˆçš„å®£ä¼ æ–‡æ¡ˆå¦‚ä¸‹ï¼š\n")
    print(result)